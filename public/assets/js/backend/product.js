$(function(){"use strict";var a={UploadImages:"admin/product/upload-images",AddProduct:"admin/product/add",FindProduct:"admin/product/find-product",EditProduct:"admin/product/edit-product"};$("#productTable").DataTable({order:[[1,"asc"]],serverSide:!0,processing:!0,stateSave:!0,fixedHeader:!0,deferRender:!0,scrollY:"20vh",scrollCollapse:!0,ajax:{url:"/admin/product/ajax-list-all",headers:{"X-CSRF-Token":$("meta[name=__public_token]").attr("content")},type:"POST"},language:{url:"//cdn.datatables.net/plug-ins/1.10.10/i18n/Vietnamese.json",decimal:",",thousands:"."},columns:[{data:"stt",name:"STT",searchable:!1,orderable:!1,"class":"columnId"},{data:"images",name:"Ảnh sản phẩm",sortable:!1},{data:"title",name:"Tên sản phẩm","class":"columnTitle"},{data:"category",name:"Danh mục","class":"columnCate",sortable:!0},{data:"price",name:"Giá niêm yết","class":"columnPrice",sortable:!0},{data:"priceSell",name:"Danh bán","class":"columnSellPrice",sortable:!0},{data:"status",name:"status",sortable:!1},{data:"availability",name:"Trạng thái",sortable:!0},{data:"timestamp",name:"Thời điểm đăng",sortable:!0},{data:"action",className:"text-center",orderable:!1}],initComplete:function(){$("[name='checkbox-availability']").bootstrapSwitch({onText:"Còn",offText:"Hết",size:"small"})}});{var e=document.getElementById("drop-zone");document.getElementById("js-add-form"),$("#progress-bar"),$("#progress-status")}$(".btn-edit-product").livequery("click",function(){var e=$(this),t=e.attr("data-id");e.block(),$.ajax({url:a.FindProduct,type:"GET",params:{id:t}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}),$("#js-add-form").livequery("submit",function(e){var t=$(this);e.preventDefault();var n=new FormData(t[0]);t.block(),$.ajax({url:a.AddProduct,type:"POST",dataType:"json",processData:!1,contentType:!1,data:n}).done(function(a){"success"==a.code&&(swalert("success","Thành công","Thêm mới thành công"),window.location.reload()),swalert("error","Thất bại","Thêm mới chưa thành công")}).fail(function(){swalert("error","Thất bại","Thêm mới chưa thành công")}).always(function(){t.unblock()})}),$("#files-upload-zone").livequery("change",function(){var a=$(this),e="",t=a.val();t&&"undefined"!=typeof t&&($(".js-upload-finished").removeClass("hide"),e+='<a href="#" class="list-group-item list-group-item-success"><span class="badge alert-success pull-right">Success</span>'+t+"</a>",$("#upload-image-finised").append(e))}),e.ondragover=function(){return this.className="upload-drop-zone drop",!1},e.ondragleave=function(){return this.className="upload-drop-zone",!1}});